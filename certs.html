<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Certificates</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  
  <!-- KEEP YOUR ORIGINAL CSS EXACTLY AS IT WAS -->
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap");

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #000000;
      min-height: 100vh;
      overflow-x: hidden;
      overflow-y: auto;
      font-family: "Arial", sans-serif;
      display: flex;
      flex-direction: column;
    }

    /* KEEP ALL YOUR ORIGINAL CSS HERE - DON'T CHANGE IT */
    /* Only add responsive fixes to the existing CSS */
    
    /* ADD THESE FIXES TO YOUR EXISTING CSS */
    .container {
      overflow: hidden; /* Prevent horizontal scroll */
    }
    
    #particleCanvas, #scannerCanvas {
      width: 100% !important; /* Make canvases responsive */
    }
    
    @keyframes scrollCards {
      0% {
        transform: translateX(-100%);
      }
      100% {
        transform: translateX(calc(100vw + 100%)); /* Better calculation */
      }
    }

    /* YOUR ORIGINAL MEDIA QUERIES STAY THE SAME */
    @media (max-width: 1024px) and (min-width: 769px) {
      .card-wrapper { width: 350px; height: 220px; }
      .card, .card-normal, .card-ascii { width: 350px; height: 220px; }
      .card-line { gap: 50px; }
    }
    
    @media (max-width: 768px) and (min-width: 481px) {
      .card-wrapper { width: 300px; height: 190px; }
      .card, .card-normal, .card-ascii { width: 300px; height: 190px; }
      .card-line { gap: 40px; }
    }
    
    @media (max-width: 480px) {
      .card-wrapper { width: 280px; height: 175px; }
      .card, .card-normal, .card-ascii { width: 280px; height: 175px; }
      .card-line { gap: 30px; }
    }
    
    @media (max-width: 375px) {
      .card-wrapper { width: 250px; height: 156px; }
      .card, .card-normal, .card-ascii { width: 250px; height: 156px; }
      .card-line { gap: 25px; }
    }
  </style>
</head>

<body>
  <!-- YOUR ORIGINAL HTML STRUCTURE -->
  <header>
    <!-- Your original navbar HTML -->
  </header>

  <div class="controls">
    <!-- Your original controls -->
  </div>

  <div class="container">
    <canvas id="particleCanvas"></canvas>
    <canvas id="scannerCanvas"></canvas>
    <div class="scanner"></div>
    <div class="card-stream" id="cardStream">
      <div class="card-line" id="cardLine"></div>
    </div>
  </div>

  <footer class="footer glass-footer">
    <!-- Your original footer -->
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // YOUR ORIGINAL JAVASCRIPT CODE GOES HERE
    // BUT ADD THESE FIXES:
    
    // Add these helper methods to CardStreamController class:
    getResponsiveCardWidth() {
      const width = window.innerWidth;
      if (width <= 375) return 250;
      if (width <= 480) return 280;
      if (width <= 768) return 300;
      if (width <= 1024) return 350;
      return 400;
    }
    
    getResponsiveCardHeight() {
      const cardWidth = this.getResponsiveCardWidth();
      return Math.floor(cardWidth * 0.625); // Maintain aspect ratio
    }
    
    getResponsiveCardGap() {
      const width = window.innerWidth;
      if (width <= 375) return 25;
      if (width <= 480) return 30;
      if (width <= 768) return 40;
      if (width <= 1024) return 50;
      return 60;
    }
    
    // Modify the calculateDimensions method:
    calculateDimensions() {
      this.containerWidth = window.innerWidth;
      const cardWidth = this.getResponsiveCardWidth();
      const cardGap = this.getResponsiveCardGap();
      const cardCount = this.cardLine.children.length;
      this.cardLineWidth = (cardWidth + cardGap) * cardCount;
    }
    
    // Update createCardWrapper to use responsive dimensions:
    createCardWrapper(index) {
      const wrapper = document.createElement("div");
      wrapper.className = "card-wrapper";
      
      const cardWidth = this.getResponsiveCardWidth();
      const cardHeight = this.getResponsiveCardHeight();
      
      // Set wrapper size
      wrapper.style.width = cardWidth + 'px';
      wrapper.style.height = cardHeight + 'px';
      
      const normalCard = document.createElement("div");
      normalCard.className = "card card-normal";
      normalCard.style.width = cardWidth + 'px';
      normalCard.style.height = cardHeight + 'px';
      
      // ... rest of your original createCardWrapper code
      // Make sure to update all hardcoded 400 and 250 values
      // to use cardWidth and cardHeight
    }
    
    // Update calculateCodeDimensions to use responsive sizes:
    calculateCodeDimensions() {
      const cardWidth = this.getResponsiveCardWidth();
      const cardHeight = this.getResponsiveCardHeight();
      
      let fontSize = 11;
      let charWidth = 6;
      
      if (cardWidth < 300) {
        fontSize = 9;
        charWidth = 5;
      } else if (cardWidth < 350) {
        fontSize = 10;
        charWidth = 5.5;
      }
      
      const lineHeight = Math.ceil(fontSize * 1.18);
      const width = Math.floor(cardWidth / charWidth);
      const height = Math.floor(cardHeight / lineHeight);
      return { width, height, fontSize, lineHeight };
    }
    
    // Add resize handler:
    setupEventListeners() {
      // ... your existing listeners ...
      
      // Add this:
      window.addEventListener("resize", () => {
        this.handleWindowResize();
      });
    }
    
    handleWindowResize() {
      this.calculateDimensions();
      this.updateCardPosition();
      this.updateCardClipping();
    }
    
    // For the particle systems, update their resize handlers:
    // In ParticleSystem class:
    onWindowResize() {
      this.camera.left = -window.innerWidth / 2;
      this.camera.right = window.innerWidth / 2;
      this.camera.updateProjectionMatrix();
      this.renderer.setSize(window.innerWidth, 250);
    }
    
    // In ParticleScanner class:
    onResize() {
      this.w = window.innerWidth;
      this.lightBarX = this.w / 2;
      this.canvas.width = this.w;
      this.canvas.height = this.h;
      this.canvas.style.width = this.w + 'px';
      this.canvas.style.height = this.h + 'px';
    }
  </script>
</body>
</html>
