<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Certificates</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap");

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #000000;
      min-height: 100vh;
      overflow-x: hidden;
      font-family: "Arial", sans-serif;
      display: flex;
      flex-direction: column;
    }

    /* Navbar Styles */
    .navbar.glass {
      position: fixed;
      top: 0;
      width: 100%;
      padding: 1.5rem 10%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      z-index: 1000;
    }

    .logo {
      font-size: 3rem;
      color: white;
      font-weight: bold;
    }

    .nav-links {
      display: flex;
      gap: 2rem;
      list-style: none;
    }

    .nav-links a {
      color: white;
      text-decoration: none;
      font-size: 1.2rem;
      transition: color 0.3s;
    }

    .nav-links a:hover {
      color: #b74b4b;
    }

    .hamburger {
      display: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }

    /* Controls */
    .controls {
      position: absolute;
      top: 90px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 100;
    }

    .control-btn {
      display: inline-block;
      padding: 1rem 2.8rem;
      background-color: black;
      border-radius: 4rem;
      font-size: 1.6rem;
      color: #b74b4b;
      letter-spacing: 0.3rem;
      font-weight: 600;
      border: 2px solid #b74b4b;
      transition: 0.3s ease;
      cursor: pointer;
    }

    .control-btn:hover {
      transform: scale3d(1.03, 1.03, 1.03);
      background-color: #b74b4b;
      color: black;
      box-shadow: 0 0 25px #b74b4b;
    }

    /* Main Container */
    .container {
      position: relative;
      width: 100%;
      flex: 1;
      margin-top: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: calc(100vh - 200px);
      overflow: hidden;
    }

    /* Card Stream */
    .card-stream {
      position: absolute;
      width: 100%;
      height: 180px;
      display: flex;
      align-items: center;
      overflow: visible;
    }

    .card-line {
      display: flex;
      align-items: center;
      gap: 60px;
      white-space: nowrap;
      cursor: grab;
      user-select: none;
      will-change: transform;
    }

    .card-line:active {
      cursor: grabbing;
    }

    .card-line.dragging {
      cursor: grabbing;
    }

    /* Card Styles */
    .card-wrapper {
      position: relative;
      width: 400px;
      height: 250px;
      flex-shrink: 0;
    }

    .card {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 15px;
      overflow: hidden;
    }

    .card-normal {
      background: transparent;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 0;
      color: white;
      z-index: 2;
      position: relative;
      overflow: hidden;
    }

    .card-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 15px;
      transition: all 0.3s ease;
    }

    .card-ascii {
      background: transparent;
      z-index: 1;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 15px;
      overflow: hidden;
    }

    .ascii-content {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      color: rgba(220, 210, 255, 0.6);
      font-family: "Courier New", monospace;
      font-size: 11px;
      line-height: 13px;
      overflow: hidden;
      white-space: pre;
      clip-path: inset(0 calc(100% - var(--clip-left, 0%)) 0 0);
      animation: glitch 0.1s infinite linear alternate-reverse;
      margin: 0;
      padding: 0;
      text-align: left;
    }

    @keyframes glitch {
      0% { opacity: 1; }
      15% { opacity: 0.9; }
      16% { opacity: 1; }
      49% { opacity: 0.8; }
      50% { opacity: 1; }
      99% { opacity: 0.9; }
      100% { opacity: 1; }
    }

    /* Footer */
    .footer {
      background: rgba(0, 0, 0, 0.8);
      color: white;
      text-align: center;
      padding: 1rem;
      position: relative;
      bottom: 0;
      width: 100%;
    }

    /* Canvas */
    #particleCanvas, #scannerCanvas {
      position: absolute;
      top: 50%;
      left: 0;
      transform: translateY(-50%);
      width: 100%;
      height: 300px;
      pointer-events: none;
      z-index: 0;
    }

    #scannerCanvas {
      z-index: 15;
    }

    /* Scanner Effect */
    .card-normal {
      clip-path: inset(0 0 0 var(--clip-right, 0%));
    }

    .card-ascii {
      clip-path: inset(0 calc(100% - var(--clip-left, 0%)) 0 0);
    }

    /* RESPONSIVE DESIGN */
    
    /* Large Desktop */
    @media (min-width: 1200px) {
      .card-wrapper {
        width: 400px;
        height: 250px;
      }
      .card-line {
        gap: 60px;
      }
    }

    /* Medium Desktop */
    @media (max-width: 1199px) and (min-width: 992px) {
      .card-wrapper {
        width: 350px;
        height: 220px;
      }
      .card-line {
        gap: 50px;
      }
    }

    /* Tablets */
    @media (max-width: 991px) and (min-width: 768px) {
      .controls {
        top: 80px;
        gap: 8px;
      }
      .control-btn {
        padding: 0.8rem 2rem;
        font-size: 1.4rem;
      }
      .card-wrapper {
        width: 300px;
        height: 190px;
      }
      .card-line {
        gap: 40px;
      }
      .container {
        margin-top: 90px;
      }
    }

    /* Mobile Landscape */
    @media (max-width: 767px) and (min-width: 576px) {
      .controls {
        top: 75px;
        gap: 6px;
        flex-wrap: wrap;
        justify-content: center;
      }
      .control-btn {
        padding: 0.7rem 1.5rem;
        font-size: 1.2rem;
      }
      .card-wrapper {
        width: 280px;
        height: 175px;
      }
      .card-line {
        gap: 30px;
      }
      .container {
        margin-top: 120px;
        min-height: calc(100vh - 220px);
      }
      .hamburger {
        display: block;
      }
      .nav-links {
        display: none;
      }
    }

    /* Mobile Portrait */
    @media (max-width: 575px) {
      .controls {
        top: 70px;
        gap: 5px;
        flex-direction: column;
        align-items: center;
      }
      .control-btn {
        padding: 0.6rem 1.2rem;
        font-size: 1.1rem;
        min-width: 50px;
      }
      .card-wrapper {
        width: 250px;
        height: 156px;
      }
      .card-line {
        gap: 25px;
      }
      .container {
        margin-top: 140px;
        min-height: calc(100vh - 240px);
      }
      .hamburger {
        display: block;
      }
      .nav-links {
        display: none;
      }
      .logo {
        font-size: 2.5rem;
      }
    }

    /* Very Small Phones */
    @media (max-width: 375px) {
      .card-wrapper {
        width: 220px;
        height: 138px;
      }
      .card-line {
        gap: 20px;
      }
    }

  </style>
</head>

<body>

  <!-- NAVIGATION BAR -->
  <header>
    <nav class="navbar glass">
      <div class="logo">Bree</div>
  
      <ul class="nav-links">
        <li><a href="index.html" class="active">Home</a></li>
        <li><a href="projects.html">Projects</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
  
      <div class="hamburger" id="hamburger">
        <i class="fa fa-bars"></i>
      </div>
    </nav>
  </header>

  <!-- BODY CONTENT -->
  <div class="controls">
    <button class="control-btn" onclick="toggleAnimation()">
      <i class="fa-solid fa-pause"></i>
    </button>
    
    <button class="control-btn" onclick="goHome()">
      <i class="fa-solid fa-house"></i>
    </button>
    
    <button class="control-btn" onclick="changeDirection()">
      <i class="fa-solid fa-arrows-left-right"></i>
    </button>
  </div>

  <div class="container">
    <canvas id="particleCanvas"></canvas>
    <canvas id="scannerCanvas"></canvas>

    <div class="card-stream" id="cardStream">
      <div class="card-line" id="cardLine"></div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="footer">
    <p>Based in Melbourne, Australia</p>
  </footer>

  <!-- JAVASCRIPT -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // Navigation functionality
    const hamburger = document.getElementById('hamburger');
    const navLinks = document.querySelector('.nav-links');
    
    hamburger.addEventListener('click', () => {
      navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
      if (navLinks.style.display === 'flex') {
        navLinks.style.flexDirection = 'column';
        navLinks.style.position = 'absolute';
        navLinks.style.top = '100%';
        navLinks.style.left = '0';
        navLinks.style.width = '100%';
        navLinks.style.backgroundColor = 'rgba(0,0,0,0.9)';
        navLinks.style.padding = '1rem';
        navLinks.style.gap = '1rem';
      }
    });

    // MAIN ANIMATION CODE
    class CardStreamController {
      constructor() {
        this.container = document.getElementById("cardStream");
        this.cardLine = document.getElementById("cardLine");
        this.position = 0;
        this.velocity = 120;
        this.direction = -1;
        this.isAnimating = true;
        this.isDragging = false;
        this.lastTime = 0;
        this.lastMouseX = 0;
        this.mouseVelocity = 0;
        this.friction = 0.95;
        this.minVelocity = 30;
        this.containerWidth = 0;
        this.cardLineWidth = 0;

        this.init();
      }

      init() {
        this.populateCardLine();
        this.calculateDimensions();
        this.setupEventListeners();
        this.updateCardPosition();
        this.animate();
        this.startPeriodicUpdates();
      }

      // FIXED: Get card dimensions from CSS
      getCardDimensions() {
        // Create a test card to get actual CSS dimensions
        const testCard = document.createElement('div');
        testCard.className = 'card-wrapper';
        testCard.style.position = 'absolute';
        testCard.style.visibility = 'hidden';
        document.body.appendChild(testCard);
        
        const width = testCard.offsetWidth;
        const height = testCard.offsetHeight;
        
        document.body.removeChild(testCard);
        
        // Fallback values if test fails
        return {
          width: width || 400,
          height: height || 250
        };
      }

      // FIXED: Get card gap from CSS
      getCardGap() {
        const testLine = document.createElement('div');
        testLine.className = 'card-line';
        testLine.style.position = 'absolute';
        testLine.style.visibility = 'hidden';
        document.body.appendChild(testLine);
        
        const gap = parseFloat(getComputedStyle(testLine).gap) || 60;
        
        document.body.removeChild(testLine);
        return gap;
      }

      calculateDimensions() {
        this.containerWidth = this.container.offsetWidth;
        const dims = this.getCardDimensions();
        const gap = this.getCardGap();
        const cardCount = this.cardLine.children.length;
        this.cardLineWidth = (dims.width + gap) * cardCount;
      }

      setupEventListeners() {
        this.cardLine.addEventListener("mousedown", (e) => this.startDrag(e));
        document.addEventListener("mousemove", (e) => this.onDrag(e));
        document.addEventListener("mouseup", () => this.endDrag());

        this.cardLine.addEventListener("touchstart", (e) => this.startDrag(e.touches[0]), { passive: false });
        document.addEventListener("touchmove", (e) => this.onDrag(e.touches[0]), { passive: false });
        document.addEventListener("touchend", () => this.endDrag());

        this.cardLine.addEventListener("wheel", (e) => this.onWheel(e));
        
        // FIXED: Handle window resize properly
        window.addEventListener("resize", () => {
          this.calculateDimensions();
          this.updateCardPosition();
          this.updateCardClipping();
        });
      }

      startDrag(e) {
        e.preventDefault();
        this.isDragging = true;
        this.isAnimating = false;
        this.lastMouseX = e.clientX;
        this.mouseVelocity = 0;

        const transform = window.getComputedStyle(this.cardLine).transform;
        if (transform !== "none") {
          const matrix = new DOMMatrix(transform);
          this.position = matrix.m41;
        }

        this.cardLine.style.animation = "none";
        this.cardLine.classList.add("dragging");
        document.body.style.userSelect = "none";
        document.body.style.cursor = "grabbing";
      }

      onDrag(e) {
        if (!this.isDragging) return;
        e.preventDefault();

        const deltaX = e.clientX - this.lastMouseX;
        this.position += deltaX;
        this.mouseVelocity = deltaX * 60;
        this.lastMouseX = e.clientX;

        this.cardLine.style.transform = `translateX(${this.position}px)`;
        this.updateCardClipping();
      }

      endDrag() {
        if (!this.isDragging) return;
        this.isDragging = false;
        this.cardLine.classList.remove("dragging");

        if (Math.abs(this.mouseVelocity) > this.minVelocity) {
          this.velocity = Math.abs(this.mouseVelocity);
          this.direction = this.mouseVelocity > 0 ? 1 : -1;
        } else {
          this.velocity = 120;
        }

        this.isAnimating = true;
        document.body.style.userSelect = "";
        document.body.style.cursor = "";
      }

      animate() {
        const currentTime = performance.now();
        const deltaTime = (currentTime - this.lastTime) / 1000;
        this.lastTime = currentTime;

        if (this.isAnimating && !this.isDragging) {
          if (this.velocity > this.minVelocity) {
            this.velocity *= this.friction;
          } else {
            this.velocity = Math.max(this.minVelocity, this.velocity);
          }

          this.position += this.velocity * this.direction * deltaTime;
          this.updateCardPosition();
        }

        requestAnimationFrame(() => this.animate());
      }

      updateCardPosition() {
        const containerWidth = this.containerWidth;
        const cardLineWidth = this.cardLineWidth;

        if (this.position < -cardLineWidth) {
          this.position = containerWidth;
        } else if (this.position > containerWidth) {
          this.position = -cardLineWidth;
        }

        this.cardLine.style.transform = `translateX(${this.position}px)`;
        this.updateCardClipping();
      }

      onWheel(e) {
        e.preventDefault();
        const scrollSpeed = 20;
        const delta = e.deltaY > 0 ? scrollSpeed : -scrollSpeed;
        this.position += delta;
        this.updateCardPosition();
        this.updateCardClipping();
      }

      // FIXED: Generate ASCII content with proper dimensions
      generateCode(width, height) {
        const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789(){}[]<>;:,._-+=!@#$%^&*|\\/\"'`~?";
        let code = "";
        
        for (let i = 0; i < height; i++) {
          let line = "";
          for (let j = 0; j < width; j++) {
            line += chars[Math.floor(Math.random() * chars.length)];
          }
          code += line + (i < height - 1 ? "\n" : "");
        }
        return code;
      }

      // FIXED: Calculate ASCII dimensions based on card size
      calculateCodeDimensions(cardWidth, cardHeight) {
        // These values work well for the ASCII font
        const charWidth = 6; // Approximate width of a character in pixels
        const charHeight = 13; // Approximate height including line height
        
        const width = Math.floor(cardWidth / charWidth);
        const height = Math.floor(cardHeight / charHeight);
        
        return { width, height };
      }

      // FIXED: Create responsive cards
      createCardWrapper(index) {
        const wrapper = document.createElement("div");
        wrapper.className = "card-wrapper";
        
        // Get actual dimensions from CSS
        const dims = this.getCardDimensions();
        
        const normalCard = document.createElement("div");
        normalCard.className = "card card-normal";
        
        const cardImages = ["Juja.png", "Strathmore.png", "Diploma.png"];
        const cardImage = document.createElement("img");
        cardImage.className = "card-image";
        cardImage.src = cardImages[index % cardImages.length];
        cardImage.alt = "Certificate";
        
        // Fallback if image fails to load
        cardImage.onerror = () => {
          cardImage.src = `https://via.placeholder.com/${dims.width}x${dims.height}/333/fff?text=Certificate+${index+1}`;
        };
        
        normalCard.appendChild(cardImage);
        
        const asciiCard = document.createElement("div");
        asciiCard.className = "card card-ascii";
        
        const asciiContent = document.createElement("div");
        asciiContent.className = "ascii-content";
        
        const { width, height } = this.calculateCodeDimensions(dims.width, dims.height);
        asciiContent.textContent = this.generateCode(width, height);
        
        asciiCard.appendChild(asciiContent);
        wrapper.appendChild(normalCard);
        wrapper.appendChild(asciiCard);
        
        return wrapper;
      }

      populateCardLine() {
        this.cardLine.innerHTML = "";
        // Create enough cards to fill the screen plus some extra
        const cardsNeeded = Math.ceil(window.innerWidth / 300) + 5;
        
        for (let i = 0; i < cardsNeeded; i++) {
          const cardWrapper = this.createCardWrapper(i);
          this.cardLine.appendChild(cardWrapper);
        }
      }

      updateCardClipping() {
        const scannerX = window.innerWidth / 2;
        const scannerWidth = 8;
        const scannerLeft = scannerX - scannerWidth / 2;
        const scannerRight = scannerX + scannerWidth / 2;

        document.querySelectorAll(".card-wrapper").forEach((wrapper) => {
          const rect = wrapper.getBoundingClientRect();
          const cardLeft = rect.left;
          const cardRight = rect.right;
          const cardWidth = rect.width;

          const normalCard = wrapper.querySelector(".card-normal");
          const asciiCard = wrapper.querySelector(".card-ascii");

          if (cardLeft < scannerRight && cardRight > scannerLeft) {
            const scannerIntersectLeft = Math.max(scannerLeft - cardLeft, 0);
            const scannerIntersectRight = Math.min(scannerRight - cardLeft, cardWidth);

            const normalClipRight = (scannerIntersectLeft / cardWidth) * 100;
            const asciiClipLeft = (scannerIntersectRight / cardWidth) * 100;

            normalCard.style.setProperty("--clip-right", `${normalClipRight}%`);
            asciiCard.style.setProperty("--clip-left", `${asciiClipLeft}%`);
          } else {
            if (cardRight < scannerLeft) {
              normalCard.style.setProperty("--clip-right", "100%");
              asciiCard.style.setProperty("--clip-left", "100%");
            } else if (cardLeft > scannerRight) {
              normalCard.style.setProperty("--clip-right", "0%");
              asciiCard.style.setProperty("--clip-left", "0%");
            }
          }
        });
      }

      startPeriodicUpdates() {
        // Update ASCII content periodically
        setInterval(() => {
          document.querySelectorAll(".ascii-content").forEach((content) => {
            if (Math.random() < 0.15) {
              const dims = this.getCardDimensions();
              const { width, height } = this.calculateCodeDimensions(dims.width, dims.height);
              content.textContent = this.generateCode(width, height);
            }
          });
        }, 500);

        // Update clipping continuously
        const updateClipping = () => {
          this.updateCardClipping();
          requestAnimationFrame(updateClipping);
        };
        updateClipping();
      }
    }

    // Simple particle system (simplified for responsiveness)
    class SimpleParticleSystem {
      constructor() {
        this.canvas = document.getElementById("particleCanvas");
        this.ctx = this.canvas.getContext("2d");
        this.particles = [];
        this.init();
      }

      init() {
        this.resize();
        this.createParticles();
        this.animate();
        window.addEventListener('resize', () => this.resize());
      }

      resize() {
        this.canvas.width = window.innerWidth;
        this.canvas.height = 300;
      }

      createParticles() {
        this.particles = [];
        for (let i = 0; i < 100; i++) {
          this.particles.push({
            x: Math.random() * this.canvas.width,
            y: Math.random() * this.canvas.height,
            vx: (Math.random() - 0.5) * 2,
            vy: (Math.random() - 0.5) * 2,
            radius: Math.random() * 3 + 1,
            alpha: Math.random() * 0.5 + 0.1
          });
        }
      }

      animate() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        
        this.particles.forEach(p => {
          p.x += p.vx;
          p.y += p.vy;
          
          if (p.x < 0) p.x = this.canvas.width;
          if (p.x > this.canvas.width) p.x = 0;
          if (p.y < 0) p.y = this.canvas.height;
          if (p.y > this.canvas.height) p.y = 0;
          
          this.ctx.beginPath();
          this.ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
          this.ctx.fillStyle = `rgba(183, 75, 75, ${p.alpha})`;
          this.ctx.fill();
        });
        
        requestAnimationFrame(() => this.animate());
      }
    }

    // Simple scanner effect (simplified for responsiveness)
    class SimpleScanner {
      constructor() {
        this.canvas = document.getElementById("scannerCanvas");
        this.ctx = this.canvas.getContext("2d");
        this.init();
      }

      init() {
        this.resize();
        this.animate();
        window.addEventListener('resize', () => this.resize());
      }

      resize() {
        this.canvas.width = window.innerWidth;
        this.canvas.height = 300;
      }

      animate() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        
        // Draw scanner line
        const scannerX = this.canvas.width / 2;
        const gradient = this.ctx.createLinearGradient(scannerX - 50, 0, scannerX + 50, 0);
        gradient.addColorStop(0, 'rgba(183, 75, 75, 0)');
        gradient.addColorStop(0.5, 'rgba(183, 75, 75, 0.8)');
        gradient.addColorStop(1, 'rgba(183, 75, 75, 0)');
        
        this.ctx.fillStyle = gradient;
        this.ctx.fillRect(scannerX - 50, 0, 100, this.canvas.height);
        
        requestAnimationFrame(() => this.animate());
      }
    }

    // Global variables
    let cardStream;
    let particleSystem;
    let scanner;

    // Initialize everything when page loads
    document.addEventListener("DOMContentLoaded", () => {
      cardStream = new CardStreamController();
      particleSystem = new SimpleParticleSystem();
      scanner = new SimpleScanner();
    });

    // Control functions
    function toggleAnimation() {
      if (cardStream) {
        cardStream.isAnimating = !cardStream.isAnimating;
        const btn = document.querySelector(".control-btn i");
        btn.className = cardStream.isAnimating ? "fa-solid fa-pause" : "fa-solid fa-play";
      }
    }

    function goHome() {
      window.location.href = 'index.html';
    }

    function changeDirection() {
      if (cardStream) {
        cardStream.direction *= -1;
      }
    }

  </script>
  
</body>
</html>
